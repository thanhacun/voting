div(ng-include='"components/navbar/navbar.html"')
header#banner.hero-unit
  .container
    h1 Speak you options
    p Sign in to begin
.container
  //Show list of polls
  .row
    .col-lg-12
      h1.page-header.text-center List of polls
    .col-md-6.col-sm-12(ng-repeat='poll in polls')
      form.col-sm-6.list-group
        label {{poll.name}}
        .form-group(ng-repeat='option in poll.options track by $index')
          label
            input(type='radio', name='{{poll.name + "_options"}}', value='{{option._id}}', ng-model='vote.select', ng-click='optionSelect(poll)')
            |{{" " + option.name}}
        //TODO: confirm on delete; disable if not author
        button.btn.btn-danger(type='button', ng-click='deletePoll(poll)', ng-disabled='!isLoggedIn') Delete
        //TODO: add option
        button.btn.btn-primary(type='button', ng-click='addOption(poll)', ng-disabled='!isLoggedIn') Add Option
        //enable only when click on a option
        button.btn.btn-success(type='button', ng-disabled='voteBtn[poll._id].canNotSubmit', ng-click='updatePollData(poll)') Vote
      .show-chart.col-sm-6
        canvas.chart.chart-bar(id='{{poll._id}}', chart-data='data[poll._id].data', chart-labels='data[poll._id].labels')
      //TODO: show chart online

  //Form to input new poll
  //only show when login
  .row(ng-show='isLoggedIn')
    .col-lg-12
      h1.page-header.text-center Add new polls
    form.col-sm-6.vote-form(ng-submit='addPoll()')
      .form-group
        label Please input new poll
        input.form-control(type='text', placeholder='Which drink do you prefer?', ng-model='newPoll.name')
      .form-group
        label Poll options
        input.form-control(type='text', ng-repeat='option in options track by $index', ng-model="newPoll.options[$index]", placeholder="{{option}}")
      button.btn.btn-primary(type='button', ng-click='moreOption()') More options
      button.btn.btn-danger(type='submit') Add new

footer.footer
  .container
    p
      | By THCN
